<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>NNabla: nbla::CgVariable Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NNabla
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenbla.html">nbla</a></li><li class="navelem"><a class="el" href="classnbla_1_1CgVariable.html">CgVariable</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classnbla_1_1CgVariable-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">nbla::CgVariable Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Computation graph variable.  
 <a href="classnbla_1_1CgVariable.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="computation__graph_2variable_8hpp_source.html">variable.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnbla_1_1CgVariable_1_1FunctionReferenceInfo.html">FunctionReferenceInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a63b5511a2bb1dcb2d33e3a8fbf1b1448"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a63b5511a2bb1dcb2d33e3a8fbf1b1448"></a>
typedef shared_ptr&lt; <a class="el" href="classnbla_1_1CgVariable.html">CgVariable</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>Ptr</b></td></tr>
<tr class="separator:a63b5511a2bb1dcb2d33e3a8fbf1b1448"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2f13cb21768f52a20373c2da45c06c64"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2f13cb21768f52a20373c2da45c06c64"></a>
NBLA_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a2f13cb21768f52a20373c2da45c06c64">CgVariable</a> ()</td></tr>
<tr class="memdesc:a2f13cb21768f52a20373c2da45c06c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create 0-shaped variable with no need_grad flag. <br /></td></tr>
<tr class="separator:a2f13cb21768f52a20373c2da45c06c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0483df4ad630b1e5cb52dfc134382d4a"><td class="memItemLeft" align="right" valign="top">NBLA_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a0483df4ad630b1e5cb52dfc134382d4a">CgVariable</a> (bool <a class="el" href="classnbla_1_1CgVariable.html#aef3100378716a760a9afb5b86d1ad89b">need_grad</a>)</td></tr>
<tr class="memdesc:a0483df4ad630b1e5cb52dfc134382d4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create 0-shaped variable with need_grad option.  <a href="#a0483df4ad630b1e5cb52dfc134382d4a">More...</a><br /></td></tr>
<tr class="separator:a0483df4ad630b1e5cb52dfc134382d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a834f5f334f2f37166e87d58a44b3f091"><td class="memItemLeft" align="right" valign="top">NBLA_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a834f5f334f2f37166e87d58a44b3f091">CgVariable</a> (<a class="el" href="namespacenbla.html#aa51203690554cf0be2ecac0c73d056aa">Shape_t</a> shape)</td></tr>
<tr class="memdesc:a834f5f334f2f37166e87d58a44b3f091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a variable by shape.  <a href="#a834f5f334f2f37166e87d58a44b3f091">More...</a><br /></td></tr>
<tr class="separator:a834f5f334f2f37166e87d58a44b3f091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3753c54ad7558aba540298c64b05fe4"><td class="memItemLeft" align="right" valign="top">NBLA_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#af3753c54ad7558aba540298c64b05fe4">CgVariable</a> (<a class="el" href="namespacenbla.html#aa51203690554cf0be2ecac0c73d056aa">Shape_t</a> shape, bool <a class="el" href="classnbla_1_1CgVariable.html#aef3100378716a760a9afb5b86d1ad89b">need_grad</a>)</td></tr>
<tr class="memdesc:af3753c54ad7558aba540298c64b05fe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a variable by shape with need_grad option.  <a href="#af3753c54ad7558aba540298c64b05fe4">More...</a><br /></td></tr>
<tr class="separator:af3753c54ad7558aba540298c64b05fe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ba486dc33e3f28d52efa84329d7194"><td class="memItemLeft" align="right" valign="top">NBLA_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#af9ba486dc33e3f28d52efa84329d7194">CgVariable</a> (VariablePtr var)</td></tr>
<tr class="memdesc:af9ba486dc33e3f28d52efa84329d7194"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create by a <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> instance.  <a href="#af9ba486dc33e3f28d52efa84329d7194">More...</a><br /></td></tr>
<tr class="separator:af9ba486dc33e3f28d52efa84329d7194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca8814085cafb4cc9ab4b4083c77834"><td class="memItemLeft" align="right" valign="top">NBLA_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a4ca8814085cafb4cc9ab4b4083c77834">CgVariable</a> (VariablePtr var, bool <a class="el" href="classnbla_1_1CgVariable.html#aef3100378716a760a9afb5b86d1ad89b">need_grad</a>)</td></tr>
<tr class="memdesc:a4ca8814085cafb4cc9ab4b4083c77834"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create by a <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> instance.  <a href="#a4ca8814085cafb4cc9ab4b4083c77834">More...</a><br /></td></tr>
<tr class="separator:a4ca8814085cafb4cc9ab4b4083c77834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef3100378716a760a9afb5b86d1ad89b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef3100378716a760a9afb5b86d1ad89b"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#aef3100378716a760a9afb5b86d1ad89b">need_grad</a> () const </td></tr>
<tr class="memdesc:aef3100378716a760a9afb5b86d1ad89b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get need grad flag. <br /></td></tr>
<tr class="separator:aef3100378716a760a9afb5b86d1ad89b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ccb1e26e3fbff0318c49afb821b159"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a39ccb1e26e3fbff0318c49afb821b159"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a39ccb1e26e3fbff0318c49afb821b159">need_grad_is_set</a> () const </td></tr>
<tr class="memdesc:a39ccb1e26e3fbff0318c49afb821b159"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if need grad flag is set. <br /></td></tr>
<tr class="separator:a39ccb1e26e3fbff0318c49afb821b159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342f5d1ce4a26cf26a17b509a2a57cd4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a342f5d1ce4a26cf26a17b509a2a57cd4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a342f5d1ce4a26cf26a17b509a2a57cd4">set_need_grad</a> (bool b)</td></tr>
<tr class="memdesc:a342f5d1ce4a26cf26a17b509a2a57cd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set need grad flag. <br /></td></tr>
<tr class="separator:a342f5d1ce4a26cf26a17b509a2a57cd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97361caf2a9ab28bdf92b14caf54ebbb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97361caf2a9ab28bdf92b14caf54ebbb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a97361caf2a9ab28bdf92b14caf54ebbb">unset_need_grad</a> ()</td></tr>
<tr class="memdesc:a97361caf2a9ab28bdf92b14caf54ebbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unset need grad flag. <br /></td></tr>
<tr class="separator:a97361caf2a9ab28bdf92b14caf54ebbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a1d47f45928f100a250081c71e178a5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a1d47f45928f100a250081c71e178a5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a6a1d47f45928f100a250081c71e178a5">need_grad_state</a> () const </td></tr>
<tr class="memdesc:a6a1d47f45928f100a250081c71e178a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get need grad state flag. <br /></td></tr>
<tr class="separator:a6a1d47f45928f100a250081c71e178a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4beb73c56896caf24d559e01fee9d78"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad4beb73c56896caf24d559e01fee9d78"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#ad4beb73c56896caf24d559e01fee9d78">need_grad_state_is_set</a> () const </td></tr>
<tr class="memdesc:ad4beb73c56896caf24d559e01fee9d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if need grad state is set. <br /></td></tr>
<tr class="separator:ad4beb73c56896caf24d559e01fee9d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae534f6804aeac46e8eba83dcc57d83b7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae534f6804aeac46e8eba83dcc57d83b7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#ae534f6804aeac46e8eba83dcc57d83b7">set_need_grad_state</a> (bool b)</td></tr>
<tr class="memdesc:ae534f6804aeac46e8eba83dcc57d83b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set need grad state flag. <br /></td></tr>
<tr class="separator:ae534f6804aeac46e8eba83dcc57d83b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafd1276df5eaaf4d05bddd0da730ced8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aafd1276df5eaaf4d05bddd0da730ced8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#aafd1276df5eaaf4d05bddd0da730ced8">unset_need_grad_state</a> ()</td></tr>
<tr class="memdesc:aafd1276df5eaaf4d05bddd0da730ced8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unset need grad state flag. <br /></td></tr>
<tr class="separator:aafd1276df5eaaf4d05bddd0da730ced8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab590a4f4e7b80e25e955c8344dd2152f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#ab590a4f4e7b80e25e955c8344dd2152f">set_parent</a> (CgFunctionPtr func)</td></tr>
<tr class="memdesc:ab590a4f4e7b80e25e955c8344dd2152f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set parent function.  <a href="#ab590a4f4e7b80e25e955c8344dd2152f">More...</a><br /></td></tr>
<tr class="separator:ab590a4f4e7b80e25e955c8344dd2152f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa98c0bc4b3c62e7caf163ed9f9bc72bc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa98c0bc4b3c62e7caf163ed9f9bc72bc"></a>
CgFunctionPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#aa98c0bc4b3c62e7caf163ed9f9bc72bc">parent</a> ()</td></tr>
<tr class="memdesc:aa98c0bc4b3c62e7caf163ed9f9bc72bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get parent function which produces outputs to this variable. <br /></td></tr>
<tr class="separator:aa98c0bc4b3c62e7caf163ed9f9bc72bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28ad11300d425f541745f25107bdf635"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a28ad11300d425f541745f25107bdf635"></a>
VariablePtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a28ad11300d425f541745f25107bdf635">variable</a> ()</td></tr>
<tr class="memdesc:a28ad11300d425f541745f25107bdf635"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get variable reference held in this instance. <br /></td></tr>
<tr class="separator:a28ad11300d425f541745f25107bdf635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a319339ccb894b8f641c863007dd1cebc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a319339ccb894b8f641c863007dd1cebc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a319339ccb894b8f641c863007dd1cebc">set_variable</a> (VariablePtr var)</td></tr>
<tr class="memdesc:a319339ccb894b8f641c863007dd1cebc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set variable reference. <br /></td></tr>
<tr class="separator:a319339ccb894b8f641c863007dd1cebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69b5835eb2b58a1522c651bf7770f5c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a69b5835eb2b58a1522c651bf7770f5c6">rank</a> () const </td></tr>
<tr class="memdesc:a69b5835eb2b58a1522c651bf7770f5c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Longest path from root variable.  <a href="#a69b5835eb2b58a1522c651bf7770f5c6">More...</a><br /></td></tr>
<tr class="separator:a69b5835eb2b58a1522c651bf7770f5c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5744eb3ecaa2abc23f13c8c8c4cbb431"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a5744eb3ecaa2abc23f13c8c8c4cbb431">set_rank_</a> (int <a class="el" href="classnbla_1_1CgVariable.html#a69b5835eb2b58a1522c651bf7770f5c6">rank</a>)</td></tr>
<tr class="memdesc:a5744eb3ecaa2abc23f13c8c8c4cbb431"><td class="mdescLeft">&#160;</td><td class="mdescRight">set rank.  <a href="#a5744eb3ecaa2abc23f13c8c8c4cbb431">More...</a><br /></td></tr>
<tr class="separator:a5744eb3ecaa2abc23f13c8c8c4cbb431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49198be54a9fcb5956a6fa7f38551701"><td class="memItemLeft" align="right" valign="top">NBLA_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a49198be54a9fcb5956a6fa7f38551701">forward</a> (bool clear_buffer=false, bool clear_no_need_grad=false, unordered_set&lt; CgFunctionPtr &gt; *fclosed=nullptr)</td></tr>
<tr class="memdesc:a49198be54a9fcb5956a6fa7f38551701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forward propagation from root inputs to this variable.  <a href="#a49198be54a9fcb5956a6fa7f38551701">More...</a><br /></td></tr>
<tr class="separator:a49198be54a9fcb5956a6fa7f38551701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c35bb291b1aaf4a48c6c791ddd3c53"><td class="memItemLeft" align="right" valign="top">NBLA_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a10c35bb291b1aaf4a48c6c791ddd3c53">backward</a> (NdArrayPtr grad=nullptr, bool clear_buffer=false, vector&lt; CommunicatorBackwardCallbackPtr &gt; communicator_callbacks={})</td></tr>
<tr class="memdesc:a10c35bb291b1aaf4a48c6c791ddd3c53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a backward propagation.  <a href="#a10c35bb291b1aaf4a48c6c791ddd3c53">More...</a><br /></td></tr>
<tr class="separator:a10c35bb291b1aaf4a48c6c791ddd3c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabd19381a0a2c8374b2f4d8870a1af77"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aabd19381a0a2c8374b2f4d8870a1af77"></a>
NBLA_API vector&lt; CgFunctionPtr &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>function_references</b> ()</td></tr>
<tr class="separator:aabd19381a0a2c8374b2f4d8870a1af77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad45d66356032076ccf65036782bb4972"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad45d66356032076ccf65036782bb4972"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>function_reference_count</b> () const </td></tr>
<tr class="separator:ad45d66356032076ccf65036782bb4972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6e03ebaac6f3ce69647db35de25f0f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aba6e03ebaac6f3ce69647db35de25f0f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>insert_function_reference</b> (CgFunctionPtr func)</td></tr>
<tr class="separator:aba6e03ebaac6f3ce69647db35de25f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1131a3ad0ee75e8b163693c8b2492bf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1131a3ad0ee75e8b163693c8b2492bf"></a>
NBLA_API void&#160;</td><td class="memItemRight" valign="bottom"><b>remove_function_reference</b> (<a class="el" href="classnbla_1_1CgFunction.html">CgFunction</a> *funcp)</td></tr>
<tr class="separator:af1131a3ad0ee75e8b163693c8b2492bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d4406a0ec90cf3795c68a2c58cf605"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a37d4406a0ec90cf3795c68a2c58cf605"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a37d4406a0ec90cf3795c68a2c58cf605">mark_need_setup</a> ()</td></tr>
<tr class="memdesc:a37d4406a0ec90cf3795c68a2c58cf605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark need_setup flag for all function references. <br /></td></tr>
<tr class="separator:a37d4406a0ec90cf3795c68a2c58cf605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a565f2a6ef13571cc2a32841d2a58e2dd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a565f2a6ef13571cc2a32841d2a58e2dd"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a565f2a6ef13571cc2a32841d2a58e2dd">check_and_unmark_need_setup</a> (CgFunctionPtr func)</td></tr>
<tr class="memdesc:a565f2a6ef13571cc2a32841d2a58e2dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check need_setup signal, and unmark it. <br /></td></tr>
<tr class="separator:a565f2a6ef13571cc2a32841d2a58e2dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32fbe8dee7e6b3e150345edf24a0dac2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a32fbe8dee7e6b3e150345edf24a0dac2">allow_modify_data</a> () const </td></tr>
<tr class="memdesc:a32fbe8dee7e6b3e150345edf24a0dac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the data can be in-placed.  <a href="#a32fbe8dee7e6b3e150345edf24a0dac2">More...</a><br /></td></tr>
<tr class="separator:a32fbe8dee7e6b3e150345edf24a0dac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a218fecd5490e85ab0ed92af0296b9b0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a218fecd5490e85ab0ed92af0296b9b0f">set_allow_modify_data</a> (bool allow)</td></tr>
<tr class="separator:a218fecd5490e85ab0ed92af0296b9b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81dbee643684ce67008e2a06a4a643df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a81dbee643684ce67008e2a06a4a643df">set_persistent</a> (bool p)</td></tr>
<tr class="memdesc:a81dbee643684ce67008e2a06a4a643df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set persistent flag.  <a href="#a81dbee643684ce67008e2a06a4a643df">More...</a><br /></td></tr>
<tr class="separator:a81dbee643684ce67008e2a06a4a643df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f52dfaef79128080d831c54ccd91b79"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1f52dfaef79128080d831c54ccd91b79"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a1f52dfaef79128080d831c54ccd91b79">persistent</a> () const </td></tr>
<tr class="memdesc:a1f52dfaef79128080d831c54ccd91b79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get persistent flag. <br /></td></tr>
<tr class="separator:a1f52dfaef79128080d831c54ccd91b79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a493785df9950f840cd30480ffd7219"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a493785df9950f840cd30480ffd7219"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a0a493785df9950f840cd30480ffd7219">set_name</a> (string <a class="el" href="classnbla_1_1CgVariable.html#afbe08457bff44ec44888fcc10aeae7e8">name</a>)</td></tr>
<tr class="memdesc:a0a493785df9950f840cd30480ffd7219"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set variable name. <br /></td></tr>
<tr class="separator:a0a493785df9950f840cd30480ffd7219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbe08457bff44ec44888fcc10aeae7e8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afbe08457bff44ec44888fcc10aeae7e8"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#afbe08457bff44ec44888fcc10aeae7e8">name</a> () const </td></tr>
<tr class="memdesc:afbe08457bff44ec44888fcc10aeae7e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get variable name. <br /></td></tr>
<tr class="separator:afbe08457bff44ec44888fcc10aeae7e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:adaf80d04ea7275e4663a75b80f782b66"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adaf80d04ea7275e4663a75b80f782b66"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>NeedGrad</b> { <b>NG_NONE</b>, 
<b>NG_FALSE</b>, 
<b>NG_TRUE</b>
 }</td></tr>
<tr class="separator:adaf80d04ea7275e4663a75b80f782b66"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aaae2e8d51e4c87cfe64bdd489e33524e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaae2e8d51e4c87cfe64bdd489e33524e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>visit_function_recursive</b> (CgFunctionPtr func, unordered_set&lt; CgFunctionPtr &gt; &amp;fclosed, std::function&lt; void(CgFunctionPtr)&gt; forward_callback)</td></tr>
<tr class="separator:aaae2e8d51e4c87cfe64bdd489e33524e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a246aa18faf6485a3e18b48f87d0ec403"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a246aa18faf6485a3e18b48f87d0ec403"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>visit_function_backward</b> (CgFunctionPtr func, std::function&lt; void(CgFunctionPtr)&gt; backward_callback, vector&lt; CommunicatorBackwardCallbackPtr &gt; communicator_callbacks)</td></tr>
<tr class="separator:a246aa18faf6485a3e18b48f87d0ec403"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ab531c3dc7b336d3d41dce3777e41eb4a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab531c3dc7b336d3d41dce3777e41eb4a"></a>
NeedGrad&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#ab531c3dc7b336d3d41dce3777e41eb4a">need_grad_</a> {NG_NONE}</td></tr>
<tr class="memdesc:ab531c3dc7b336d3d41dce3777e41eb4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the variable requires gradients. <br /></td></tr>
<tr class="separator:ab531c3dc7b336d3d41dce3777e41eb4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0469e6cf4befe52c84afcb5228fcd8e"><td class="memItemLeft" align="right" valign="top">NeedGrad&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#ab0469e6cf4befe52c84afcb5228fcd8e">need_grad_state_</a></td></tr>
<tr class="memdesc:ab0469e6cf4befe52c84afcb5228fcd8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updated during graph construction or forward propagation.  <a href="#ab0469e6cf4befe52c84afcb5228fcd8e">More...</a><br /></td></tr>
<tr class="separator:ab0469e6cf4befe52c84afcb5228fcd8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a604fd495812ae89136a8720efaf6daa5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a604fd495812ae89136a8720efaf6daa5"></a>
VariablePtr&#160;</td><td class="memItemRight" valign="bottom"><b>var_</b></td></tr>
<tr class="separator:a604fd495812ae89136a8720efaf6daa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49969d70bc7eb7a7f57729ae66de5d42"><td class="memItemLeft" align="right" valign="top">CgFunctionPtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a49969d70bc7eb7a7f57729ae66de5d42">parent_</a> {nullptr}</td></tr>
<tr class="memdesc:a49969d70bc7eb7a7f57729ae66de5d42"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> instance.  <a href="#a49969d70bc7eb7a7f57729ae66de5d42">More...</a><br /></td></tr>
<tr class="separator:a49969d70bc7eb7a7f57729ae66de5d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af372af636109ef9b6e6102eba7826e62"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#af372af636109ef9b6e6102eba7826e62">rank_</a> {0}</td></tr>
<tr class="memdesc:af372af636109ef9b6e6102eba7826e62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Longest path from root variable.  <a href="#af372af636109ef9b6e6102eba7826e62">More...</a><br /></td></tr>
<tr class="separator:af372af636109ef9b6e6102eba7826e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac69db2f356c3d156dd31201b2cc12c05"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac69db2f356c3d156dd31201b2cc12c05"></a>
unordered_map&lt; <a class="el" href="classnbla_1_1CgFunction.html">CgFunction</a> *, pair&lt; std::weak_ptr&lt; <a class="el" href="classnbla_1_1CgFunction.html">CgFunction</a> &gt;, <a class="el" href="structnbla_1_1CgVariable_1_1FunctionReferenceInfo.html">FunctionReferenceInfo</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>function_references_</b></td></tr>
<tr class="separator:ac69db2f356c3d156dd31201b2cc12c05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b2085b34db732c14a255477a2af77b4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8b2085b34db732c14a255477a2af77b4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a8b2085b34db732c14a255477a2af77b4">allow_modify_data_</a> {true}</td></tr>
<tr class="memdesc:a8b2085b34db732c14a255477a2af77b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the data can be in-placed. <br /></td></tr>
<tr class="separator:a8b2085b34db732c14a255477a2af77b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15e0c600d55ca98b2d828bdc63b09dbf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a15e0c600d55ca98b2d828bdc63b09dbf"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classnbla_1_1CgVariable.html#a15e0c600d55ca98b2d828bdc63b09dbf">persistent_</a> {false}</td></tr>
<tr class="memdesc:a15e0c600d55ca98b2d828bdc63b09dbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Persistency flag against clearing. <br /></td></tr>
<tr class="separator:a15e0c600d55ca98b2d828bdc63b09dbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4699ce83c42884c22047003fa28c8f4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa4699ce83c42884c22047003fa28c8f4"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>name_</b> {&quot;&quot;}</td></tr>
<tr class="separator:aa4699ce83c42884c22047003fa28c8f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a54da1dcee629b222b424b4edfd175bbd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a54da1dcee629b222b424b4edfd175bbd"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>CgFunction</b></td></tr>
<tr class="separator:a54da1dcee629b222b424b4edfd175bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Computation graph variable. </p>
<p>A <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> object is held in this object as a data container. In addition, a CGVariable object keeps information about the computation graph it belongs to. The information if such as the pointer to the parent function which creates this variable and some performance optimization clues. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0483df4ad630b1e5cb52dfc134382d4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NBLA_API nbla::CgVariable::CgVariable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_grad</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create 0-shaped variable with need_grad option. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">need_grad</td><td>Whether this variable requires gradient computation or not </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a834f5f334f2f37166e87d58a44b3f091"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NBLA_API nbla::CgVariable::CgVariable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacenbla.html#aa51203690554cf0be2ecac0c73d056aa">Shape_t</a>&#160;</td>
          <td class="paramname"><em>shape</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a variable by shape. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">shape</td><td>Shape passed to <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> object held in the created instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af3753c54ad7558aba540298c64b05fe4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NBLA_API nbla::CgVariable::CgVariable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacenbla.html#aa51203690554cf0be2ecac0c73d056aa">Shape_t</a>&#160;</td>
          <td class="paramname"><em>shape</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_grad</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a variable by shape with need_grad option. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">shape</td><td>Shape passed to <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> object held in the created instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">need_grad</td><td>Whether this variable requires gradient computation or not </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af9ba486dc33e3f28d52efa84329d7194"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NBLA_API nbla::CgVariable::CgVariable </td>
          <td>(</td>
          <td class="paramtype">VariablePtr&#160;</td>
          <td class="paramname"><em>var</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create by a <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">var</td><td>Reference of an existing <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4ca8814085cafb4cc9ab4b4083c77834"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NBLA_API nbla::CgVariable::CgVariable </td>
          <td>(</td>
          <td class="paramtype">VariablePtr&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_grad</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create by a <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">var</td><td>Reference of an existing <a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> object. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">need_grad</td><td>Whether this variable requires gradient computation or not </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab590a4f4e7b80e25e955c8344dd2152f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nbla::CgVariable::set_parent </td>
          <td>(</td>
          <td class="paramtype">CgFunctionPtr&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set parent function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">func</td><td><a class="el" href="classnbla_1_1Function.html" title="An interface for the units of computation. ">Function</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Users usually don't use this directly. Used in connect function. </dd></dl>

</div>
</div>
<a class="anchor" id="a69b5835eb2b58a1522c651bf7770f5c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nbla::CgVariable::rank </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Longest path from root variable. </p>
<p>Holds weak function references. <a href="https://stackoverflow.com/a/22110715">https://stackoverflow.com/a/22110715</a> </p>

</div>
</div>
<a class="anchor" id="a5744eb3ecaa2abc23f13c8c8c4cbb431"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nbla::CgVariable::set_rank_ </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set rank. </p>
<dl class="section note"><dt>Note</dt><dd>Users shouldn't call this directly. </dd></dl>

</div>
</div>
<a class="anchor" id="a49198be54a9fcb5956a6fa7f38551701"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NBLA_API void nbla::CgVariable::forward </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>clear_buffer</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>clear_no_need_grad</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unordered_set&lt; CgFunctionPtr &gt; *&#160;</td>
          <td class="paramname"><em>fclosed</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Forward propagation from root inputs to this variable. </p>
<p>The predecessor functions are executed in order of lower rank to higher rank until reaching this variable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">clear_buffer</td><td>Clear <a class="el" href="classnbla_1_1SyncedArray.html" title="Synchronized array interface that implicitly transfers and cast arrays over devices and data types...">SyncedArray</a> object of a variable never be used during the rest of forward propagation. This option significantly saves the memory consumption. This is not usually used in training phase because backward computation requires data computed during forward prop. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clear_need_grad</td><td>Clear the unreferenced variables with need_grad=False during forward propagation. True is usually used when calling this during training. This is ignored when clear_buffer=True. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fclosed</td><td>Set arbitrary fclosed flags to control forward computation. This is used for forward_all function.</td></tr>
  </table>
  </dd>
</dl>
<p><a class="el" href="classnbla_1_1CgVariable.html#a81dbee643684ce67008e2a06a4a643df" title="Set persistent flag. ">set_persistent()</a> to prevent a specific variable to be cleared during forward propagation. </p>

</div>
</div>
<a class="anchor" id="a10c35bb291b1aaf4a48c6c791ddd3c53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NBLA_API void nbla::CgVariable::backward </td>
          <td>(</td>
          <td class="paramtype">NdArrayPtr&#160;</td>
          <td class="paramname"><em>grad</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>clear_buffer</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; CommunicatorBackwardCallbackPtr &gt;&#160;</td>
          <td class="paramname"><em>communicator_callbacks</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a backward propagation. </p>
<p>starting from this variable until the root variable(s) is/are reached in the computation graph. The propagation will stop at a variable with need_grad=false. Backward propagation through predecessors of this variable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">grad</td><td>The backward error signal of this variable. if nullptr is set, its gradients are set as 1. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clear_buffer</td><td>Clears the no longer referenced variables during backpropagation to save memory. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">communicator_callbacks</td><td>The callback functions invoked when 1) backward computation of each function is finished and 2) all backward computation is finished.</td></tr>
  </table>
  </dd>
</dl>
<p><a class="el" href="classnbla_1_1CgVariable.html#a81dbee643684ce67008e2a06a4a643df" title="Set persistent flag. ">set_persistent()</a> to prevent a specific variable to be cleared during forward propagation. </p>

</div>
</div>
<a class="anchor" id="a32fbe8dee7e6b3e150345edf24a0dac2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool nbla::CgVariable::allow_modify_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether the data can be in-placed. </p>

</div>
</div>
<a class="anchor" id="a218fecd5490e85ab0ed92af0296b9b0f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nbla::CgVariable::set_allow_modify_data </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allow</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>User shouldn't call this directly. </dd></dl>

</div>
</div>
<a class="anchor" id="a81dbee643684ce67008e2a06a4a643df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nbla::CgVariable::set_persistent </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set persistent flag. </p>
<p>If it's true, the variable data and grad are never cleared during forward or backward propagation with clear options. It is useful for visualization and debugging purposes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>Persistent flag. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab0469e6cf4befe52c84afcb5228fcd8e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">NeedGrad nbla::CgVariable::need_grad_state_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div><div class="line">      NG_NONE}</div></div><!-- fragment -->
<p>Updated during graph construction or forward propagation. </p>

</div>
</div>
<a class="anchor" id="a49969d70bc7eb7a7f57729ae66de5d42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CgFunctionPtr nbla::CgVariable::parent_ {nullptr}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classnbla_1_1Variable.html" title="User interface for Array and passed to Function.Shared pointer of Variable. ">Variable</a> instance. </p>
<p><a class="el" href="classnbla_1_1Function.html" title="An interface for the units of computation. ">Function</a> created this variable. </p>

</div>
</div>
<a class="anchor" id="af372af636109ef9b6e6102eba7826e62"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int nbla::CgVariable::rank_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Longest path from root variable. </p>
<p>Holds weak function references. <a href="https://stackoverflow.com/a/22110715">https://stackoverflow.com/a/22110715</a> </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="computation__graph_2variable_8hpp_source.html">computation_graph/variable.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 26 2019 07:08:26 for NNabla by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
